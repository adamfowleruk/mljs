<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>MLJS tutorial060-rest-ext</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	
	<link type="text/css" rel="stylesheet" href="styles/site.cerulean.css">
	
</head>

<body>
<div class="container-fluid">
	<div class="navbar navbar-fixed-top ">
		<div class="navbar-inner">
			<a class="brand" href="index.html">MLJS</a>
			<ul class="nav">
				
				<li class="dropdown">
					<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="BasicWrapper.html">BasicWrapper</a>
						</li>
						
						<li>
							<a href="com.marklogic.events.Publisher.html">Publisher</a>
						</li>
						
						<li>
							<a href="com.marklogic.semantic.tripleconfig.html">tripleconfig</a>
						</li>
						
						<li>
							<a href="DigestWrapper.html">DigestWrapper</a>
						</li>
						
						<li>
							<a href="mljs.html">mljs</a>
						</li>
						
						<li>
							<a href="mljs_documentcontext.html">documentcontext</a>
						</li>
						
						<li>
							<a href="mljs_geocontext.html">geocontext</a>
						</li>
						
						<li>
							<a href="mljs_options.html">options</a>
						</li>
						
						<li>
							<a href="mljs_query.html">query</a>
						</li>
						
						<li>
							<a href="mljs_searchcontext.html">searchcontext</a>
						</li>
						
						<li>
							<a href="mljs_searchcontext.defaultparser.html">defaultparser</a>
						</li>
						
						<li>
							<a href="mljs_semanticcontext.html">semanticcontext</a>
						</li>
						
						<li>
							<a href="mljs_sparqlbuilder.html">sparqlbuilder</a>
						</li>
						
						<li>
							<a href="PassThroughWrapper.html">PassThroughWrapper</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="tutorials.list.html" class="dropdown-toggle" data-toggle="dropdown">Tutorials<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="tutorial-001-intro.html">001-intro</a>
						</li>
						
						<li>
							<a href="tutorial-001-widgets-list.html">001-widgets-list</a>
						</li>
						
						<li>
							<a href="tutorial-002-intro-firstpage.html">002-intro-firstpage</a>
						</li>
						
						<li>
							<a href="tutorial-002-widgets-search.html">002-widgets-search</a>
						</li>
						
						<li>
							<a href="tutorial-003-widgets-search-render.html">003-widgets-search-render</a>
						</li>
						
						<li>
							<a href="tutorial-004-widgets-highcharts.html">004-widgets-highcharts</a>
						</li>
						
						<li>
							<a href="tutorial-011-browser-create-app.html">011-browser-create-app</a>
						</li>
						
						<li>
							<a href="tutorial-012-browser-install-app.html">012-browser-install-app</a>
						</li>
						
						<li>
							<a href="tutorial-013-browser-samples-app.html">013-browser-samples-app</a>
						</li>
						
						<li>
							<a href="tutorial-014-browser-workplace.html">014-browser-workplace</a>
						</li>
						
						<li>
							<a href="tutorial-020-angular.html">020-angular</a>
						</li>
						
						<li>
							<a href="tutorial-050-core-contexts.html">050-core-contexts</a>
						</li>
						
						<li>
							<a href="tutorial-051-core-custom-searchcontext-endpoint.html">051-core-custom-searchcontext-endpoint</a>
						</li>
						
						<li>
							<a href="tutorial-060-rest-ext.html">060-rest-ext</a>
						</li>
						
						<li>
							<a href="tutorial-901-ontology.html">901-ontology</a>
						</li>
						
						<li>
							<a href="tutorial-999-samples.html">999-samples</a>
						</li>
						
						<li>
							<a href="tutorial-all.html">all</a>
						</li>
						
						<li>
							<a href="tutorial-dev1-001-overview.html">dev1-001-overview</a>
						</li>
						
						<li>
							<a href="tutorial-dev1-002-intro.html">dev1-002-intro</a>
						</li>
						
						<li>
							<a href="tutorial-dev1-003-first-page.html">dev1-003-first-page</a>
						</li>
						
						<li>
							<a href="tutorial-dev1-004-first-widget.html">dev1-004-first-widget</a>
						</li>
						
						<li>
							<a href="tutorial-dev1-005-search-options.html">dev1-005-search-options</a>
						</li>
						
						<li>
							<a href="tutorial-dev1-006-structured-query.html">dev1-006-structured-query</a>
						</li>
						
						<li>
							<a href="tutorial-dev1-007-semantics.html">dev1-007-semantics</a>
						</li>
						
						<li>
							<a href="tutorial-dev1-008-lunch.html">dev1-008-lunch</a>
						</li>
						
						<li>
							<a href="tutorial-dev1-009-blending-mljs.html">dev1-009-blending-mljs</a>
						</li>
						
						<li>
							<a href="tutorial-dev1-010-building-demo.html">dev1-010-building-demo</a>
						</li>
						
						<li>
							<a href="tutorial-dev1-011-demo-jam.html">dev1-011-demo-jam</a>
						</li>
						
						<li>
							<a href="tutorial-dev1-012-home-time.html">dev1-012-home-time</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="global.html" class="dropdown-toggle" data-toggle="dropdown">Global<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="global.html#padNC">padNC</a>
						</li>
						
						<li>
							<a href="global.html#parseDigest">parseDigest</a>
						</li>
						
						<li>
							<a href="global.html#textToXML">textToXML</a>
						</li>
						
						<li>
							<a href="global.html#xmlToJson">xmlToJson</a>
						</li>
						
						<li>
							<a href="global.html#xmlToJsonSearchResults">xmlToJsonSearchResults</a>
						</li>
						
						<li>
							<a href="global.html#xmlToJsonStrict">xmlToJsonStrict</a>
						</li>
						

					</ul>
				</li>
				
			</ul>
		</div>
	</div>

	<div class="row-fluid">

		
			<div class="span12">
				
				<div id="main">
					<section>
    
<header>
    

    <h2>060-rest-ext</h2>
</header>  

<article>
    <p><a href="tutorial-all.html">Back to All Tutorials list</a></p>
<h1>REST Extensions supported by MLJS</h1>
<p>This tutorial describes the REST extensions supported by MLJS core and their purpose</p>
<h2>version</h2>
<p>Core: db.version(function(result) { console.log(result.doc.version); });</p>
<p>The version extension exposes the MarkLogic server version identifier so that MLJS can use the most appropriate function. This is particularly
useful if a new version makes some enhancement to existing functionality.</p>
<p>An example of this is in V6 search options had to be saved before issuing a query that used them. In V7 it is possible to instead submit
a combined query, with one request containing both query options and the query itself in a single call. MLJS' various search functions
check for whether the server is at V7 or not to determine the most appropriate action.</p>
<p>If this extension isn't installed them MLJS will silently fall back to V6 functionality. Note you may see a HTTP 500 error in your browser's
debugging console, but this is normal and trapped by MLJS.</p>
<h2>RDB2RDF</h2>
<p>Core: db.samListSchema(), db.samSchemaInfo(), db.samRdb2Rdf()</p>
<p>RDB2RDF is a W3C standard for taking relational data and copying it in to a triple store. These extensions use the Direct Mapping of W3C's RDB2RDF
standard for this purpose. samListSchema takes a SAM (an XQuery library and Java Servlet for processing SQL against an RDBMS from MarkLogic) service
URL and lists all schema available on that connection.</p>
<p>samSchemaInfo gives detail about a specific schema, including table names and row counts. This is achieved through Information Schema support. Only
a subset of RDBMS support this. Please check with your RDBMS vendor.</p>
<p>samRdb2Rdf performs an import of a single table in a single schema, importing all rows in that table and generating appropriate RDF Subject's and facts
as appropriate. This also includes relationships (predicates) to other Subjects by introspecting the constraints (E.g. foreign key constraints)
present in the RDBMS Schema. Again this relies on Information Schema support.</p>
<h2>Document Library Services (DLS)</h2>
<p>Core: db.dlsdeclare(), db.dlscollections(), db.dlscollection(), db.dlsrules, db.dlsrule()</p>
<p>DLS is a MarkLogic feature that allows storing multiple document versions over time. This includes support for update locks, retention schedules, and
disposition of document versions based on rules.</p>
<p>dlsdeclare() declares one or more URIs as 'records'. I.e. places them under DLS management. It also adds these documents to the specified named collection.</p>
<p>dlscollections() lists all collections that contain a dls managed document. dlscollection() lists documents within a DLS collection.</p>
<p>dlsrules() lists all DLS retention rules by name. dlsrule() shows the full configuration of a DLS retention rule.</p>
<h2>whoami</h2>
<p>Core: db.whoami()</p>
<p>This function asks the MarkLogic Server what the username of the currently logged in user is. This is useful as XQuery or the web application is typically
in charge of the login process, so MLJS needs a way to determine the username of the current user. This is particularly useful for personalisation, where
search options (for example) are stored against a particular user for later usage.</p>
<h2>Saved searches and alerts</h2>
<p>Core: db.saveBasicSearch(), db.saveCollectionSearch(), db.saveGeoNearSearch(), db.saveExistingSearch(), db.subscribe(), db.unsubscribe(), db.unsubscribeAndDelete()</p>
<p>These functions deal with persisting a structured query as a document. This is the basis of alerting in MarkLogic. These functions all assume that an action
exists on the server that will send the matching document in its entirety to a RESTful web service endpoint. This has been used to invoke a Node.js RESTful
web service which then passes this message to a HTML 5 WebSockets based web application for situational awareness. This creates a real time, responsive
alerting application. This is more effective than MarkLogic 7's alert mechanism which still requires a client web application to poll the REST API periodically.</p>
<p>saveBasicSearch() saves a default grammar query string as an alert, specifying like all the other functions in this section a notification url to send the
alert to via a HTTP REST POST call.</p>
<p>saveCollectionSearch saves an alert for all documents entering the system in a particular collection. geoNearSearch does the same for a document that contains
one or more points within a particular radius of a point. saveExistingSearch takes a URI of an existing saved search, and enables this for alerting.</p>
<p>subscribe and unsubscribe are generic methods that do as you would expect. unsubscribeAndDelete unsubscribes the alert, and deletes the original search document.</p>
<hr>
<p><a href="tutorial-all.html">Back to All Tutorials list</a></p>
</article>

</section>  

				</div>

				<div class="clearfix"></div>
				<footer>
					
					MLJS - A JavaScript wrapper for the MarkLogic REST API
					<br />
					
					
		<span class="copyright">
		MarkLogic 2012-2014
		</span>
					<br />
					
		<span class="jsdoc-message">
		Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.3-dev</a>
		on Thu Apr 17 2014 13:42:19 GMT+0100 (BST) using the <a href="https://github.com/terryweiss/docstrap">DocStrap template</a>.
		</span>
				</footer>
			</div>

			
			<br clear="both">
		</div>

	</div>
	<script src="scripts/sunlight.js"></script>
	<script src="scripts/sunlight.javascript.js"></script>
	<script src="scripts/sunlight-plugin.doclinks.js"></script>
	<script src="scripts/sunlight-plugin.linenumbers.js"></script>
	<script src="scripts/sunlight-plugin.menu.js"></script>
	<script src="scripts/jquery.min.js"></script>
	<script src="scripts/jquery.scrollTo.js"></script>
	<script src="scripts/jquery.localScroll.js"></script>
	<script src="scripts/bootstrap-dropdown.js"></script>
	<script src="scripts/toc.js"></script>


	<script>  Sunlight.highlightAll({lineNumbers:true,  showMenu: true, enableDoclinks :true}); </script>

	<script>
		$( function () {
			$( "#toc" ).toc( {
			    anchorName  : function(i, heading, prefix) {
					return $(heading).attr("id") || ( prefix + i );
				},
				selectors   : "h1,h2,h3,h4",
				showAndHide : false,
				scrollTo    : 60
			} );
			$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
			$( "#main span[id^='toc']" ).addClass( "toc-shim" );

		} );
	</script>

	

</body>
</html>